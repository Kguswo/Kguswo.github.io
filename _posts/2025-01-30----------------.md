---
title: "다중 서버 환경에서 세션 기반 인증 방식의 위험성"
description: "다중 서버 환경에서 세션 기반 인증 방식은 세션 불일치 문제를 초래할 수 있다. 만약 서버 A, B를 관리하고 있을 때, 로드 밸런서는 사용자의 요청을 상황에 맞게 A, B 중 한 곳으로 전달한다. 유효한 로그인 요청이 A 서버로 처음 도착하면 사용자에 대한 세션 정보"
date: 2025-01-29T17:16:01.966Z
tags: ["Java","Spring","백엔드"]
slug: "다중-서버-환경에서-세션-기반-인증-방식의-위험성"
thumbnail: "/assets/posts/d1b84ce914ee92706f44659ab420c8ba9de195cf48a1b1ca172fb05f98fab475.png"
categories: 공부
toc: true
velogSync:
  lastSyncedAt: 2025-08-26T02:03:37.025Z
  hash: "84feda55bb7c4664e59ed44cdc77a60f9ccf4a8446b146e866e63994a83ec4be"
---

### 세션 불일치 문제

다중 서버 환경에서 세션 기반 인증 방식은 **세션 불일치 문제**를 초래할 수 있다. 만약 서버 A, B를 관리하고 있을 때, 로드 밸런서는 사용자의 요청을 상황에 맞게 A, B 중 한 곳으로 전달한다. 유효한 로그인 요청이 A 서버로 처음 도착하면 사용자에 대한 세션 정보는 A 서버에 저장된다. 이후 해당 사용자의 또 다른 요청이 로드 밸런서에 도착했을 때, B 서버로 도착하게 되면 사용자의 세션 데이터가 존재하지 않기 때문에 요청이 제대로 처리되지 않는다. 이를 세션 불일치 문제라고 한다.

### 해결 방법

#### 1. 스티키 세션 방식
**스티키 세션 방식** 은 사용자 요청이 항상 사용자 세션 정보가 저장된 서버로 가도록 고정하는 방식이다. 사용자 요청의 쿠키나 IP를 통해서 어느 서버로 고정 시킬지 결정한다. 장점은 단순하다는 것이다. 반면, 단점으로는 특정 서버에 트래픽이 집중될 수 있다는 문제점과 사용자의 세션 정보를 가지고 있는 서버가 다운되면 해당 서버에 고정된 사용자는 다시 로그인해야하는 문제점이 존재한다.


#### 2. 세션 클러스터링 방식
**세션 클러스터링 방식**은 특정 서버에 사용자 세션 정보가 생성될 때, 다른 서버로 정보를 복제하는 방식이다. 장점은 여러 서버에 세션 정보를 중복으로 저장하므로 스티키 세션의 트래픽 몰림 현상과 세션 정보 유실 문제를 해결한다는 점이다. 반면, 단점은 세션 정보를 중복 저장한다는 점에서 메모리를 비효율적으로 사용하며, 세션 정보 복제 과정에서 발생하는 네트워크 트래픽 문제, 세션 정보 복제 지연으로 인한 일시적인 세션 정보 유실 문제가 발생할 수 있다.


#### 3. 스토리지 분리 방식
**스토리지 분리 방식**은 세션 정보를 저장하는 공간을 외부로 분리하는 방식이다. 세션 클러스터링 방식, 스티키 세션 방식에서 발생하는 문제를 해결할 수 있다. 해당 방식의 단점은 스토리지에 대한 단일 장애 지점(Single Point Of Failure)이 문제가 될 수 있으며, 클러스터링과 같은 HA 구성으로 단일 장애 지점을 해소하여도 복제 지연으로 인한 일시적인 세션 정보 유실 문제는 발생할 수 있다. 또한, 외부 스토리지를 관리하기 위한 추가적인 리소스가 요구될 수 있다.

### References
- [다중 서버 환경에서의 세션 불일치 문제와 해결 방법](https://mgyo.tistory.com/829)